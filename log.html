<!DOCTYPE html>
<html>
<head>
  <title>IPログ記録</title>
</head>
<body>
  <script>
    (async () => {
      try {
        // IPアドレス取得
        const ip = await fetch('https://api.ipify.org').then(res => res.text());

        // ユーザーエージェント取得
        const ua = navigator.userAgent;

        // Google Apps Script に送信
        fetch("https://script.google.com/macros/s/AKfycbzRHcnX1UDO9nvV8OVMeZvk9HaSpRF0xlUgwpoEeTuU0Ar1RTdg_Hluhjy-XfBqFfvO/exec?ip=" 
              + encodeURIComponent(ip) 
              + "&ua=" 
              + encodeURIComponent(ua));
      } catch (e) {
        console.error("IPログ送信に失敗しました:", e);
      }
    })();
  </script>

  <p>このページはIPログを記録しています。</p>
</body>
</html>
