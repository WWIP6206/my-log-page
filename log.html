<!DOCTYPE html>
<html>
<head>
  <title>IPログ記録</title>
</head>
<body>
  <script>
    (async () => {
      try {
        const ip = await fetch('https://api.ipify.org').then(res => res.text());
        const ua = navigator.userAgent;

        // 任意の文書ID・ユーザーID（固定でも動的でもOK）
        const docId = "log-page-001";
        const userId = "anonymous";

        // GASに送信
        fetch("https://script.google.com/macros/s/AKfycbzRHcnX1UDO9nvV8OVMeZvk9HaSpRF0xlUgwpoEeTuU0Ar1RTdg_Hluhjy-XfBqFfvO/exec?"
              + "ip=" + encodeURIComponent(ip)
              + "&ua=" + encodeURIComponent(ua)
              + "&docId=" + encodeURIComponent(docId)
              + "&userId=" + encodeURIComponent(userId));
      } catch (e) {
        console.error("IPログ送信に失敗しました:", e);
      }
    })();
  </script>

  <p>このページはIPログを記録しています。</p>
</body>
</html>
